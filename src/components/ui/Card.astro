---
import Button from "./Button.astro";
import ArrowIcon from "../../assets/icons/MaterialSymbolsArrowOutwardRounded.svg";

export interface Props {
  title: string;
  slug?: string;
  image?: {
    src: string;
    alt: string;
  };
  tags?: string[];
  link?: {
    href: string;
    text: string;
    external?: boolean;
  };
  class?: string;
  variant?: "default" | "featured" | "minimal";
}

const {
  title,
  slug,
  image,
  tags,
  link,
  class: className = "",
  variant = "default",
} = Astro.props;

// Estilos base para la tarjeta
const baseStyles = "rounded-lg overflow-hidden ";

// Variantes de la tarjeta
const variants = {
  default: "bg-white dark:bg-gray-800 shadow-md",
  featured:
    "bg-blue-50 dark:bg-blue-900 shadow-xl border-2 border-blue-200 dark:border-blue-700",
  minimal: "bg-transparent",
};

const cardClasses = [baseStyles, variants[variant], className].join(" ");
---

<article class={`${cardClasses} flex flex-col`}>
  <a href={slug ? slug : "#"} class="group cursor-pointer">
    {
      image && (
        <div class="aspect-video overflow-hidden rounded-2xl border-2 border-gray-300">
          <img
            src={image.src}
            alt={image.alt}
            loading="lazy"
            class="object-cover w-full h-full transition-transform duration-500 ease-in-out group-hover:scale-[1.05]"
          />
        </div>
      )
    }

    <div class="p-6 px-0">
      <header class="flex flex-col md:flex-row justify-between h-fit">
        <h3 class="flex gap-2 text-xl md:text-3xl font-bold mb-2">
          {title}
          <span class="h-fit flex items-center">
            <ArrowIcon
              class="w-7 h-7 transition-transform duration-500 ease-in-out group-hover:translate-x-1 group-hover:scale-110"
            />
          </span>
        </h3>

        {
          tags && tags.length > 0 && (
            <div class="hidden flex-wrap gap-2 transition-transform duration-500 ease-in-out group-hover:flex">
              {tags.map((tag) => (
                <span class="inline-flex items-center px-2.5 py-2 rounded-lg text-xs font-medium bg-transparent border border-gray-600">
                  {tag}
                </span>
              ))}
            </div>
          )
        }
      </header>

      <slot />
    </div>
  </a>
</article>
