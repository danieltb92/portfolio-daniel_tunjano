---
import Button from './Button.astro';

export interface Props {
    title: string;
    description?: string;
    image?: {
        src: string;
        alt: string;
    };
    tags?: string[];
    link?: {
        href: string;
        text: string;
        external?: boolean;
    };
    class?: string;
    variant?: 'default' | 'featured' | 'minimal';
}

const {
    title,
    description,
    image,
    tags,
    link,
    class: className = '',
    variant = 'default'
} = Astro.props;

// Estilos base para la tarjeta
const baseStyles = 'rounded-lg overflow-hidden transition-transform hover:scale-[1.02] focus-within:scale-[1.02]';

// Variantes de la tarjeta
const variants = {
    default: 'bg-white dark:bg-gray-800 shadow-md',
    featured: 'bg-blue-50 dark:bg-blue-900 shadow-xl border-2 border-blue-200 dark:border-blue-700',
    minimal: 'bg-transparent hover:bg-gray-50 dark:hover:bg-gray-900'
};

const cardClasses = [
    baseStyles,
    variants[variant],
    className
].join(' ');
---

<article class={cardClasses}>
    {image && (
        <div class="relative aspect-video overflow-hidden">
            <img
                src={image.src}
                alt={image.alt}
                class="object-cover w-full h-full"
                loading="lazy"
            />
        </div>
    )}
    
    <div class="p-6">
        <header>
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">
                {title}
            </h3>
            {tags && tags.length > 0 && (
                <div class="flex flex-wrap gap-2 mb-4">
                    {tags.map(tag => (
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">
                            {tag}
                        </span>
                    ))}
                </div>
            )}
        </header>

        {description && (
            <p class="text-gray-600 dark:text-gray-300 mb-4">
                {description}
            </p>
        )}

        {link && (
            <footer class="mt-auto">
                <Button
                    href={link.href}
                    target={link.external ? '_blank' : undefined}
                    variant={variant === 'featured' ? 'primary' : 'secondary'}
                    size="sm"
                >
                    {link.text}
                    {link.external && (
                        <svg
                            slot="icon-right"
                            xmlns="http://www.w3.org/2000/svg"
                            class="h-4 w-4 ml-1"
                            viewBox="0 0 20 20"
                            fill="currentColor"
                        >
                            <path
                                fill-rule="evenodd"
                                d="M5.293 6.707a1 1 0 0 1 0-1.414l8-8a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414l-8 8a1 1 0 0 1-1.414 0l-4-4zM7 14l-.707.707a1 1 0 0 0 1.414 1.414L7 14zm-2-2l-4 4v2h2l4-4-2-2z"
                                clip-rule="evenodd"
                            />
                        </svg>
                    )}
                </Button>
            </footer>
        )}

        <slot />
    </div>
</article>
