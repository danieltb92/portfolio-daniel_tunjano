---
import Layout from "@/layouts/Layout.astro";
import Footer from "@/components/sections/Footer.astro";
import Header from "@/components/sections/Header.astro";
import LogoScroller from "@/components/sections/LogoScroller.astro";
import FormBlack from "@/assets/formBlack.svg";
import FormWhite from "@/assets/formWhite.svg";

import { useTranslations } from "@/i18n/utils";
import { languageList } from "@/i18n/ui";

// i18n Obtener el idioma actual y la función de traducción
const currentLang = Astro.currentLocale || "es";
const translateLabels = useTranslations(
  currentLang as keyof typeof languageList
);
---

<Layout>
  <!-- <Header /> -->
  <main
    class="items-center mt-[64px] py-10 lg:py-20 h-auto text-center max-w-7xl m-auto px-4"
  >
    <h2 class="text-4xl font-bold mb-16">
      {translateLabels("page.about.title")}
    </h2>
    <article
      class="grid grid-cols-1 lg:grid-cols-2 gap-4 w-full overflow-visible"
    >
      <picture class="flex justify-center overflow-visible"
        ><img
          class="w-[450px] overflow-visible py-8 block dark:hidden"
          src={FormBlack.src}
          alt="Forma en tema claro"
        />
        <img
          class="w-[450px] overflow-visible py-8 hidden dark:block"
          src={FormWhite.src}
          alt="Forma en tema oscuro"
        />
      </picture>
      <p
        class="flex justify-items-center justify-center justify-self-center align-middle text-md text-left m-auto p-5"
      >
        {translateLabels("page.about.paragraph")}
      </p>
    </article>

    <!-- <LogoScroller /> -->
  </main>
  <!-- <Footer /> -->
</Layout>

<script>
  import { gsap } from "gsap";

  const initAboutAnimation = () => {
    const main = document.querySelector("main");
    if (!main) return;

    const tl = gsap.timeline();

    const title = main.querySelector("h2");
    const image = main.querySelector("picture");
    const text = main.querySelector("p");

    if (title) {
      tl.from(title, {
        y: -30,
        opacity: 0,
        duration: 0.8,
        ease: "power3.out",
      });
    }

    if (image) {
      tl.from(
        image,
        {
          x: -50,
          opacity: 0,
          duration: 0.8,
          ease: "power3.out",
        },
        "-=0.4"
      );
    }

    if (text) {
      tl.from(
        text,
        {
          x: 50,
          opacity: 0,
          duration: 0.8,
          ease: "power3.out",
        },
        "-=0.6"
      );
    }
  };

  initAboutAnimation();
  document.addEventListener("astro:after-swap", initAboutAnimation);
</script>
